<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shoulder Diagnostic Tool~ Cyriax</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">
    <header>
        <h1>ðŸ©º Shoulder Diagnostic Engine</h1>
        <p>Follow the clinical examination findings to reach a diagnosis.</p>
            </header>

    <main class="card">
        {% if node.is_final_diagnosis %}
            <div class="status success">Diagnosis Reached</div>
            <h2>{{ node.label }}</h2>
            
            {% if node.diagnosis_list %}
                <ul class="diagnosis-list">
                    {% for item in node.diagnosis_list %}
                        <li>{{ item }}</li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No specific sub-types listed.</p>
            {% endif %}

            <a href="/reset" class="btn btn-primary">Start New Diagnosis</a>

        {% elif not paths %}
            <div class="status error">End of Path</div>
            <h2>{{ node.label }}</h2>
            <p>No further paths defined in this logic tree.</p>
            <a href="/reset" class="btn btn-secondary">Start Over</a>

        {% else %}
            <div class="status">Current Finding</div>
            <h2>{{ node.label }}</h2>
            <p>Select the next clinical finding:</p>

            <form method="POST" action="/">
                <div class="options-grid">
                    {% for path in paths %}
                        <button type="submit" name="choice" value="{{ loop.index0 }}" class="option-btn">
                            {{ path }}
                        </button>
                    {% endfor %}
                </div>
            </form>
            
            <div class="controls">
                <a href="/reset" class="reset-link">Reset</a>
            </div>
        {% endif %}
    </main>
</div>

</body>
</html>
